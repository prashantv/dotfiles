#!/usr/bin/env bash

# Bash "strict" mode
set -euo pipefail
IFS=$'\n\t'

# Convert to base64, for OSC52
str=$(base64)

# If fd 1 is a terminal, print directly
if [ -t 1 ]
then
  printf '\033]52;c;%s\a' "${str}"
  exit 0
fi

# Otherwise, print to /dev/tty
printf '\033]52;c;%s\a' "${str}" > /dev/tty



